<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-pink: #ffafcc;
            --soft-white: #fdfcf0;
            --accent-rose: #ff8fab;
            --night-sky-center: #050a18;
            --night-sky-edge: #02040a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Quicksand', sans-serif; background: var(--soft-white); overflow-x: hidden; }

        /* 1. Calendar Overlay (Centered) */
        .calendar-section {
            height: 100vh; width: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: var(--primary-pink);
            position: fixed; z-index: 200; text-align: center;
        }
        .calendar-card {
            background: white; width: 220px; height: 280px;
            border-radius: 20px; border: 5px solid white;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }
        .cal-header { background: #d90429; color: white; padding: 15px; font-weight: bold; border-radius: 12px 12px 0 0; }
        .cal-day { font-size: 7rem; font-weight: 700; color: #333; margin-top: 20px; }
        .cal-subtext { color: white; font-weight: 500; font-size: 1.3rem; opacity: 0; }

        /* 2. Wish Section */
        .wish-section { height: 100vh; display: flex; align-items: center; justify-content: center; background: var(--soft-white); }
        .wish-section h1 { font-family: 'Dancing Script', cursive; font-size: clamp(2rem, 7vw, 3.8rem); color: var(--accent-rose); text-align: center; }

        /* 3. Star Map Section (Gradient exactly like your preferred code) */
        .star-map-section { 
            height: 500vh; 
            background: radial-gradient(circle at 50% 50%, var(--night-sky-center) 0%, var(--night-sky-edge) 100%); 
            position: relative; z-index: 1; 
        }
        .star-text-wrapper { position: sticky; top: 0; height: 100vh; display: flex; justify-content: center; align-items: center; z-index: 100; pointer-events: none; }
        .star-text { color: white; font-family: 'Dancing Script', cursive; font-size: 2.8rem; text-align: center; position: absolute; opacity: 0; padding: 20px; text-shadow: 0 0 20px rgba(255,255,255,0.4); }

        /* Star Styling exactly like your preferred code */
        .star { 
            position: absolute; background: white; border-radius: 50%; z-index: 2; 
            filter: blur(0.2px); 
            will-change: transform, left, top, opacity;
        }
        .star-bright { 
            box-shadow: 0 0 10px 1px rgba(255, 255, 255, 0.4), 0 0 18px 2px rgba(255, 255, 255, 0.15); 
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(0.85); }
            50% { opacity: 0.9; transform: scale(1.05); }
        }

        /* 4. Photo Section */
        .photo-section { height: 600vh; background: #ffe5ec; position: relative; overflow: hidden; margin-top: -1px; }
        .photo-container { position: sticky; top: 0; height: 100vh; display: flex; justify-content: center; align-items: center; perspective: 1200px; z-index: 1; }
        .polaroid { background: white; padding: 15px 15px 60px; position: absolute; opacity: 0; width: clamp(320px, 45vw, 500px); box-shadow: 0 20px 60px rgba(0,0,0,0.15); border-radius: 4px; }
        .polaroid img { width: 100%; height: auto; display: block; }
        .caption { text-align: center; font-family: 'Dancing Script', cursive; margin-top: 15px; font-size: 1.8rem; color: #444; }

        .mailbox-section { height: 100vh; display: flex; justify-content: center; align-items: center; background: var(--primary-pink); position: relative; z-index: 2; }
    </style>
</head>
<body>

    <div class="calendar-section" id="calendar">
        <div class="calendar-card">
            <div class="cal-header">FEBRUARY</div>
            <div class="cal-day" id="day-counter">1</div>
        </div>
        <p class="cal-subtext" id="cal-subtext">Something special is coming up...</p>
    </div>

    <section class="wish-section" id="wish-trigger">
        <h1 id="bday-text">Happy Birthday to the most<br>special person in my life! üéÇ</h1>
    </section>

    <section class="star-map-section" id="star-trigger">
        <div id="star-container"></div>
        <div class="star-text-wrapper">
            <h2 class="star-text" id="star-msg-1">Every star in the universe moved...</h2>
            <h2 class="star-text" id="star-msg-2">To align perfectly on February 9, 2006.</h2>
        </div>
    </section>

   <section class="photo-section" id="photo-area">
        <div class="photo-container">
            <div class="polaroid"><img src="images/1.jpeg"><div class="caption">Chutku ‚ú®</div></div>
            <div class="polaroid"><img src="images/2.jpeg"><div class="caption">Papa ki Gutput ‚ù§Ô∏è</div></div>
            <div class="polaroid"><img src="images/3.jpeg"><div class="caption">With your people üïäÔ∏è</div></div>
            <div class="polaroid"><img src="images/4.jpeg"><div class="caption">Nahh</div></div>
            <div class="polaroid"><img src="images/5.jpeg"><div class="caption">Our people</div></div>
            <div class="polaroid"><img src="images/6.JPEG"><div class="caption">Our very first moments together</div></div>
            <div class="polaroid"><img src="images/7.jpeg"><div class="caption">Forever yours üíç</div></div>
            <div class="polaroid"><img src="images/8.JPEG"><div class="caption">The smile I'm in love with</div></div>
            <div class="polaroid"><img src="images/9.JPEG"><div class="caption">Lost in the prettiest eyes ‚ù§Ô∏è</div></div>
            <div class="polaroid"><img src="images/10.jpeg"><div class="caption">A year together</div></div>
        </div>
    </section>

    <section class="mailbox-section">
        <div style="font-size: 7rem; cursor: pointer;" onclick="document.getElementById('note').style.display='block'">üì¨</div>
    </section>

   <div id="note" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px; border-radius:30px; z-index:1000; width:85%; max-width:450px; box-shadow:0 30px 100px rgba(0,0,0,0.5); text-align: left;">
    <h2 style="font-family:'Dancing Script'; color: var(--accent-rose); font-size: 2.2rem; margin-bottom: 15px;">Happiest Birthday Baby! ‚ù§Ô∏è</h2>
    <div style="font-size: 1.1rem; line-height: 1.6; color: #333; max-height: 60vh; overflow-y: auto; padding-right: 10px; font-family: 'Quicksand', sans-serif;">
        <p>Sabse pehle, a very Happy Birthday to you Cutu! I really wish ki tum humesha aise hi hasti raho, healthy raho, aur tumhe life mein wo sab mile jo tum chahti ho. You deserve all the success and happiness in the world.</p><br>
        
        <p>Aaj ka din mere liye bhi bohot special hai because exactly ek saal pehle issi din hum pehli baar OmeTV par mile the. I still remember that moment. Bhale hi humara relationship baadme start hua, but mere liye humari kahani wahin se shuru ho gayi thi.</p><br>
        
        <p>I know long distance kaafi mushkil hojata hai and kabhi kabhi bohot bura lagta hai dur reh kar, but wo do baar jab hum real mein mile... those are the best days of my life. Distance matter nahi karta jab bond itna strong ho.</p><br>
        
        <p>Bas yahi chahta hoon ki humara ye bond humesha aise hi bana rahe, forever. I‚Äôm always here for you.</p><br>
        
        <p style="font-family: 'Dancing Script'; font-size: 1.5rem; color: var(--accent-rose);"><b>With all my love,<br>Rishi</b></p>
    </div>
    <button onclick="document.getElementById('note').style.display='none'" style="margin-top:25px; width:100%; padding:12px; background:var(--accent-rose); color:white; border:none; border-radius:12px; cursor:pointer; font-weight:bold;">Close</button>
</div>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // 1. Calendar Logic
        let dayObj = { val: 1 };
        gsap.to("#cal-subtext", { opacity: 1, duration: 1, delay: 0.5 });
        gsap.to(dayObj, {
            val: 9, duration: 2.5, onUpdate: () => document.getElementById('day-counter').innerText = Math.floor(dayObj.val),
            onComplete: () => {
                const duration = 3000;
                const end = Date.now() + duration;
                (function frame() {
                  confetti({ particleCount: 8, angle: 60, spread: 80, origin: { x: 0, y: 0.65 }, colors: ['#ffafcc', '#ff8fab', '#ffffff'] });
                  confetti({ particleCount: 8, angle: 120, spread: 80, origin: { x: 1, y: 0.65 }, colors: ['#ffafcc', '#ff8fab', '#ffffff'] });
                  if (Date.now() < end) requestAnimationFrame(frame);
                }());
                gsap.to("#calendar", { y: "-100%", duration: 1, ease: "power4.inOut", delay: 1.2 });
            }
        });

        // 2. Stars Logic (Exactly following your provided star styling/twinkling)
        const container = document.getElementById('star-container');
        const starCount = 450; 
        const stars = [];

        function getHeartPoint(t, r) {
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
            return { x: 50 + (x * 2.4 * r), y: 45 - (y * 2.4 * r) };
        }

        for (let i = 0; i < starCount; i++) {
            const s = document.createElement('div');
            s.className = 'star';
            const sizeValue = Math.random() * 2.5 + 0.4;
            s.style.width = sizeValue + 'px'; s.style.height = sizeValue + 'px';
            
            // Apply bloom/glow to larger stars exactly as requested
            if (sizeValue > 1.8) {
                s.classList.add('star-bright');
                s.style.opacity = Math.random() * 0.3 + 0.7;
            } else {
                s.style.opacity = Math.random() * 0.6 + 0.2;
            }

            // Twinkling animation from your preferred code
            s.style.animation = `twinkle ${3 + Math.random() * 5}s infinite ease-in-out`;
            s.style.animationDelay = `${Math.random() * 5}s`;

            // Initial grid positions (20 cols)
            const cols = 20;
            s.style.left = (i % cols) * (100 / cols) + 'vw';
            s.style.top = Math.floor(i / cols) * (100 / 23) + 'vh';
            container.appendChild(s);

            const skyX = Math.random() * 100;
            const skyY = Math.random() * 100;
            const t = Math.random() * 2 * Math.PI;
            const r = Math.pow(Math.random(), 0.5);
            const hp = getHeartPoint(t, r);

            stars.push({ el: s, skyX, skyY, hX: hp.x, hY: hp.y });
        }

        // Star Timeline with "Moment of Appreciation"
        const starTl = gsap.timeline({ scrollTrigger: { trigger: "#star-trigger", start: "top top", end: "bottom top", scrub: 1.2, pin: true } });
        
        starTl.to("#star-msg-1", { opacity: 1, duration: 1 })
              .to(stars.map(s => s.el), { left: (i) => stars[i].skyX + "vw", top: (i) => stars[i].skyY + "vh", duration: 3, ease: "none" }, 1)
              .to("#star-msg-1", { opacity: 0, duration: 0.5 }, 1.5)
              .to("#star-msg-2", { opacity: 1, duration: 1 }, 2)
              .to("#star-msg-2", { opacity: 0, duration: 0.5, delay: 1.5 }, 3.5)
              .to({}, { duration: 1.5 }) // Appreciation pause
              .to(stars.map(s => s.el), { 
                  left: (i) => stars[i].hX + "vw", 
                  top: (i) => stars[i].hY + "vh", 
                  backgroundColor: "#ff8fab",
                  boxShadow: "0 0 15px #ff8fab",
                  duration: 4,
                  ease: "power2.inOut" 
              }, "+=0.2");

        // 3. Polaroid Stacking (Fixed Rotation and No Excess Scroll)
        const pics = gsap.utils.toArray('.polaroid');
        const photoScrollTl = gsap.timeline({
            scrollTrigger: { trigger: ".photo-section", start: "top top", end: "bottom bottom", scrub: 1, pin: true }
        });

        pics.forEach((pic, i) => {
            photoScrollTl.to(pic, { 
                opacity: 1, y: 0, 
                rotation: i % 2 === 0 ? Math.min(i * 1.5, 8) : -Math.min(i * 1.5, 8), 
                scale: 1, duration: 1, ease: "power2.out" 
            }, i * 0.75);

            if (i < pics.length - 1) {
                photoScrollTl.to(pic, { x: i % 2 === 0 ? 1200 : -1200, rotation: i % 2 === 0 ? 30 : -30, opacity: 0, duration: 1, delay: 0.3 });
            }
        });
    </script>
</body>
</html>
